# Context
Filename: task.md
Created On: 2025-11-20
Created By: AI
Associated Protocol: RIPER-5 + Multidimensional + Agent Protocol

# Task Description
Add addictive gameplay elements: **Elite Enemies** and **Treasure Chests** (机缘宝箱).
- **Elite Enemies**: Stronger versions of mobs with auras, spawning periodically.
- **Treasure Chests**: Dropped by elites.
- **Rewards**: Opening a chest triggers a "Roulette" of high-value rewards (e.g., Full Heal, Screen Nuke, Instant Level Up).

# Project Overview
Lingjian Game.

---
*The following sections are maintained by the AI during protocol execution*
---

# Analysis (Populated by RESEARCH mode)
- **Current Spawning**: Random based on time.
- **Needs**:
    - Timer for Elite spawning (e.g., every 40s).
    - `Chest` entity class.
    - UI for "Chest Opening" (simple modal or floating text).

# Proposed Solution (Populated by INNOVATE mode)
- **Elite Spawn**: Every 45s. Type matches current stage. Stats: HP*5, Dmg*1.5, Scale*1.5. Visual: Golden ring under feet.
- **Chest**: SVG Asset (Gold Box).
- **Chest Rewards**:
    1.  **大还丹**: Recover 100% HP.
    2.  **万剑归一**: Kill all normal enemies on screen.
    3.  **顿悟**: Gain 1 full level (Instant EXP).

# Implementation Plan (Generated by PLAN mode)
Implementation Checklist:
1.  [x] Add `chest` SVG to `SVG_LIB`.
2.  [x] Update `GameEngine`: Add `eliteTimer`. Logic to spawn elite.
3.  [x] Update `Enemy` class: Support `isElite` flag (Scale draw, stats, drop Chest).
4.  [x] Create `Chest` class (Entity).
5.  [x] Implement `openChest` logic in `GameEngine`: Pick reward, show effect/text.

# Current Execution Step (Updated by EXECUTE mode when starting a step)
> Currently executing: "Final Review"

# Task Progress (Appended by EXECUTE mode after each step completion)
*   2025-11-20
    *   Step: 1-5
    *   Modifications: Implemented Elite system, Chest drops, and high-value rewards.
    *   Change Summary: Periodic Elite spawns (every 45s) provide challenging fights and lucrative rewards.
    *   Reason: Executing plan.
    *   Blockers: None.
    *   User Confirmation Status: Pending Confirmation
