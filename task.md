# Context
Filename: task.md
Created On: 2025-11-20
Created By: AI
Associated Protocol: RIPER-5 + Multidimensional + Agent Protocol

# Task Description
Implement Irregular Island Edges with Stage-Specific Decorations.
- **Goal**: Make the main island edges look natural and stage-appropriate (e.g., vines for forest, ice blocks for tundra).
- **Feedback**: "Edges are flat... need irregular edges like real islands... vegetation/vines for forest, smooth ice for tundra."

# Project Overview
Lingjian Game.

---
*The following sections are maintained by the AI during protocol execution*
---

# Analysis (Populated by RESEARCH mode)
- **Current**: Perfect circle R=600.
- **Solution**: Pre-generate edge decoration objects (bushes, rocks, vines) around the perimeter and render them in the `draw` loop attached to the tilted ground layer.

# Proposed Solution (Populated by INNOVATE mode)
-   **Data**: `this.edgeDecorations = []`.
-   **Init**: Generate in `initStageMap`.
-   **Render**: Draw in `draw()` after island surface.
-   **Styles**:
    -   Forest: Green circles + Hanging vines.
    -   Ice: Translucent polygons.
    -   Magma/Bone: Jagged rocks.
    -   Fairyland: Smooth stones.

# Implementation Plan (Generated by PLAN mode)
Implementation Checklist:
1.  [ ] Modify `js/engine.js`:
    -   Add `edgeDecorations` to state.
    -   Implement `initEdgeDecorations`.
    -   Call it in `initStageMap`.
    -   Render in `draw`.
