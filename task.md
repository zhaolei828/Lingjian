# Context
Filename: task.md
Created On: 2025-11-20
Created By: AI
Associated Protocol: RIPER-5 + Multidimensional + Agent Protocol

# Task Description
Restrict Enemy Spawning to the Island Area for Stage 4.
- **Problem**: Standard logic spawns enemies off-screen (in the void for Stage 4), which feels disconnected or they take too long to arrive / appear visually floating in void.
- **Solution**: Spawn enemies strictly within or on the edge of the Island Circle (R=600).

# Project Overview
Lingjian Game.

---
*The following sections are maintained by the AI during protocol execution*
---

# Analysis (Populated by RESEARCH mode)
- **Stage 4**: Map is finite (R=600).
- **Spawn Logic**: Change from "Screen Boundary" to "Map Boundary".
- **Location**: R=580 (Edge of map) is a good default.

# Proposed Solution (Populated by INNOVATE mode)
-   Modify `spawnEnemy`:
    -   If `stageIdx === 4`:
        -   Pick random angle.
        -   Set `x, y` at distance 580.
        -   Add "Spawn Cloud/Particle" effect.

# Implementation Plan (Generated by PLAN mode)
Implementation Checklist:
1.  [ ] Modify `js/engine.js`: Update `spawnEnemy` and `spawnElite`.
